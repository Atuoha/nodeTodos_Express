'use strict';const express=require("express"),app=express(),router=express.Router(),User=require("../../models/User"),Todo=require("../../models/Todo"),{signinAuth}=require("../../helpers/authenticate");router.all("/*",signinAuth,(a,c,d)=>{a.app.locals.layout="admin";d()});
router.get("/",(a,c)=>{User.findOne({_id:a.user}).then(d=>{Todo.find({user:a.user}).then(e=>{let n=Object.keys(e).length;Todo.find({user:a.user}).where("status").equals(!1).then(f=>{let p=Object.keys(f).length;Todo.find({user:a.user}).where("completion_status").equals(!1).then(g=>{let q=Object.keys(g).length;Todo.find({user:a.user}).where("completion_status").equals(!0).then(h=>{let r=Object.keys(h).length;Todo.find().then(k=>{let t=Object.keys(k).length;Todo.find().where("completion_status").equals(!0).then(l=>
{let u=Object.keys(l).length;Todo.find().where("completion_status").equals(!1).then(m=>{let v=Object.keys(m).length;User.find().then(b=>{b=Object.keys(b).length;c.render("admin",{profile:d,todosCount:n,cancelledCount:p,incompletedCount:q,completedCount:r,userCount:b,all_todosCount:t,all_completedCount:u,all_incompletedCount:v})}).catch(b=>console.log(b))}).catch(m=>console.log(m))}).catch(l=>console.log(l))}).catch(k=>console.log(k))}).catch(h=>console.log(h))}).catch(g=>console.log(g))}).catch(f=>
console.log(f))}).catch(e=>console.log(e))})});router.get("/about",(a,c)=>{c.render("admin/about")});module.exports=router;